# Dynamic RTL

افزونه کروم برای تشخیص خودکار متن فارسی و عربی در صفحات وب و اعمال جهت راست به چپ (RTL) و فونت مناسب.

## ویژگی‌ها

- تشخیص خودکار متن فارسی و عربی در هر صفحه وب
- اعمال جهت راست به چپ و فونت وزیرمتن برای متن‌های تشخیص داده شده
- فقط به متن‌هایی که با کلمات فارسی یا عربی شروع می‌شوند، RTL اعمال می‌کند
- کارکرد با محتوای پویا که پس از بارگذاری اولیه صفحه لود می‌شود
- تشخیص بهبود یافته برای فیلدهای ورودی و ناحیه‌های متنی
- امکان غیرفعال کردن افزونه برای وب‌سایت‌های خاص
- امکان انتخاب حالت پیش‌فرض فعال یا غیرفعال برای همه سایت‌ها
- سازگار با Manifest V3 کروم

## نصب

### از فروشگاه وب کروم (به زودی)

1. به فروشگاه وب کروم بروید
2. عبارت "Dynamic RTL" را جستجو کنید
3. روی "افزودن به کروم" کلیک کنید

### از افزونه‌های فایرفاکس (به زودی)

1. به وب‌سایت افزونه‌های فایرفاکس بروید
2. عبارت "Dynamic RTL" را جستجو کنید
3. روی "افزودن به فایرفاکس" کلیک کنید

### نصب دستی

#### کروم

1. این مخزن را دانلود یا کلون کنید
2. کروم را باز کنید و به آدرس `chrome://extensions/` بروید
3. "حالت توسعه‌دهنده" را در گوشه بالا سمت راست فعال کنید
4. روی "بارگذاری بسته نصب نشده" کلیک کنید و پوشه حاوی فایل‌های افزونه را انتخاب کنید
5. افزونه اکنون باید نصب و فعال شده باشد

#### فایرفاکس

1. این مخزن را دانلود یا کلون کنید
2. برای نصب در فایرفاکس، شما نیاز به استفاده از فایل مانیفست مخصوص فایرفاکس دارید:
   - فایل `manifest-firefox.json` را به طور موقت به `manifest.json` تغییر نام دهید (یا یک کپی با این نام بسازید)
   - یا مستقیماً فایل `manifest-firefox.json` را در مرحله بعدی بارگذاری کنید
3. فایرفاکس را باز کنید و به آدرس `about:debugging#/runtime/this-firefox` بروید
4. روی "بارگذاری افزونه موقت" کلیک کنید
5. به پوشه افزونه بروید و فایل `manifest.json` یا `manifest-firefox.json` را انتخاب کنید
6. افزونه اکنون باید نصب و فعال شده باشد (توجه: این یک نصب موقت است که با بستن فایرفاکس حذف خواهد شد)

**نکته مهم**: اگر می‌خواهید از افزونه در هر دو مرورگر کروم و فایرفاکس استفاده کنید، نسخه‌های جداگانه‌ای از پوشه افزونه با فایل مانیفست مناسب برای هر مرورگر نگه دارید.

برای نصب دائمی در فایرفاکس:
1. مطمئن شوید که از فایل مانیفست فایرفاکس استفاده می‌کنید (`manifest-firefox.json` تغییر نام داده شده به `manifest.json`)
2. افزونه را به صورت فایل ZIP بسته‌بندی کنید
3. به آدرس `about:addons` بروید
4. روی آیکون چرخ‌دنده کلیک کنید و "نصب افزونه از فایل" را انتخاب کنید
5. فایل ZIP ایجاد شده را انتخاب کنید

## استفاده

### تنظیمات سایت فعلی

- برای فعال یا غیرفعال کردن افزونه در سایت فعلی، روی آیکون افزونه در نوار ابزار کلیک کنید و کلید "فعال در این سایت" را تغییر دهید
- تغییرات بلافاصله اعمال می‌شوند

### تنظیمات کلی

افزونه دو حالت پیش‌فرض دارد که می‌توانید بین آن‌ها سوییچ کنید:

1. **پیش‌فرض فعال در همه سایت‌ها (امکان غیرفعال کردن در سایت‌های دلخواه)**:
   - در این حالت، افزونه در همه سایت‌ها فعال است مگر اینکه شما آن را در سایت‌های خاصی غیرفعال کنید
   - برای غیرفعال کردن در یک سایت خاص، کلید "فعال در این سایت" را خاموش کنید

2. **پیش‌فرض غیرفعال در همه سایت‌ها (امکان فعال کردن در سایت‌های دلخواه)**:
   - در این حالت، افزونه در همه سایت‌ها غیرفعال است مگر اینکه شما آن را در سایت‌های خاصی فعال کنید
   - برای فعال کردن در یک سایت خاص، کلید "فعال در این سایت" را روشن کنید

برای تغییر بین این دو حالت:
1. روی آیکون افزونه در نوار ابزار کلیک کنید
2. یکی از دو گزینه رادیویی در بخش "تنظیمات کلی" را انتخاب کنید

## جزئیات فنی

- استفاده از MutationObserver برای تشخیص و پردازش محتوای اضافه شده به صورت پویا
- تشخیص بهبود یافته متن برای فیلدهای ورودی و ناحیه‌های متنی
- تشخیص هوشمند که فقط به متن‌هایی که با کلمات فارسی یا عربی شروع می‌شوند، RTL اعمال می‌کند
- پیاده‌سازی Manifest V3 برای سازگاری با افزونه‌های کروم
- استفاده از فونت وزیرمتن برای نمایش بهینه متن فارسی/عربی

## بهبودهای اخیر

### نسخه 1.2.0
- افزودن سازگاری با فایرفاکس

### نسخه 1.1.0
- تغییر انتخاب حالت پیش‌فرض از کلید تغییر وضعیت به گزینه‌های رادیویی
- اضافه کردن لینک پروفایل X (توییتر)
- انتخاب پیش‌فرض گزینه "پیش‌فرض فعال در همه سایت‌ها"
- استفاده از فونت وزیرمتن در رابط کاربری افزونه

### نسخه 1.0.0
- اضافه کردن امکان انتخاب حالت پیش‌فرض فعال یا غیرفعال برای همه سایت‌ها
- اضافه کردن تشخیص هوشمند که فقط به متن‌هایی که با کلمات فارسی یا عربی شروع می‌شوند، RTL اعمال می‌کند
- بهبود تشخیص متن فارسی در فیلدهای ورودی و ناحیه‌های متنی
- پشتیبانی از المان‌های contenteditable
- بهبود مدیریت المان‌های ورودی که به صورت پویا اضافه می‌شوند

## مجوز

این پروژه متن‌باز است و تحت مجوز MIT در دسترس است.

## اعتبارات

- اسکریپت اصلی توسط Sorou-sh
- فونت وزیرمتن توسط صابر راستی‌کردار
- افزودن سازگاری با فایرفاکس توسط [sadegh19b](https://github.com/sadegh19b) 